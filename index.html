<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Integrated Inductance Analysis Tool</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
	<header class="header">
    <div class="header-content">
      <div class="logo-section">
        <a href="https://emlizard.github.io/main-page/" class="back-btn">
          <i class="fas fa-arrow-left"></i>
          ‚Üê Back to Calculators
        </a>
        <div class="page-title">Inductance Analysis</div>
      </div>
      <button class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon" id="themeIcon"></i>
      </button>
    </div>
  </header>
	
    

    <div class="container">
        <div class="hero animate-in">
            <h1>üöÄ Integrated Inductance Analysis Tool</h1>
            <p>Analyze inductance data with advanced visualization and filtering capabilities.</p>
        </div>

        <div class="card animate-in">
            <h2 class="card-title">
                <span class="card-icon">üì•</span>
                Step 1: Paste Raw Data
            </h2>
            <div class="input-group">
                <textarea id="rawInput" class="input-field data-input" placeholder="Ïù¥Í≥≥Ïóê Îç∞Ïù¥ÌÑ∞Î•º Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî..."></textarea>
            </div>
            <div style="text-align: center;">
                <button id="processBtn" class="btn btn-full">üìä Process and Analyze Data</button>
            </div>
            <div id="processingErrors" class="error-message"></div>
        </div>

        <textarea id="dataInput" class="input-field data-input hidden"></textarea>

        <div id="analysisContainer" class="hidden">
            <hr class="calc-sections animate-in">
            <div class="hero animate-in">
                <h1>Step 2: Analysis Results</h1>
            </div>
            <div class="card animate-in">
                <h2 class="card-title">
                    <span class="card-icon">üìã</span>
                    Parsed Data Confirmation
                </h2>
                <div id="dataCount" class="data-count">Waiting for data...</div>
                <div class="table-wrapper">
                    <table class="stats-table" id="parsedDataTable">
                        <thead>
                            <tr>
                                <th>Center Leg</th><th>Outer Shell</th><th>L_initial(uH)</th><th>Idc_70%(A)</th><th>Idc_80%(A)</th><th>Gap(mm)</th><th>N</th><th>FoM</th>
                            </tr>
                        </thead>
                        <tbody id="parsedDataTableBody"></tbody>
                    </table>
                </div>
            </div>
            <div class="grid grid-2">
                <div class="card animate-in">
                    <h2 class="card-title">
                        <span class="card-icon">üîç</span>
                        Center Leg Core Filter
                    </h2>
                    <div class="filter-actions">
                        <button class="btn-filter" id="selectAllCenterLegs">Select All</button>
                        <button class="btn-filter" id="deselectAllCenterLegs">Deselect All</button>
                    </div>
                    <div class="filter-controls" id="centerLegFilterControls"></div>
                </div>
                <div class="card animate-in">
                    <h2 class="card-title">
                        <span class="card-icon">üîç</span>
                        Outer Core Shell Filter
                    </h2>
                    <div class="filter-actions">
                        <button class="btn-filter" id="selectAllOuterCores">Select All</button>
                        <button class="btn-filter" id="deselectAllOuterCores">Deselect All</button>
                    </div>
                    <div class="filter-controls" id="outerCoreFilterControls"></div>
                </div>
            </div>
            <div class="card animate-in">
                <h2 class="card-title">
                    <span class="card-icon">‚öôÔ∏è</span>
                    Analysis Options
                </h2>
                <div class="controls">
                    <div class="control-group">
                        <label for="xAxis" class="input-label">X-Axis</label>
                        <select id="xAxis" class="input-field">
                            <option value="Idc_80">Idc 80% (A)</option>
                            <option value="Idc_70">Idc 70% (A)</option>
                            <option value="L_initial">Inductance (ŒºH)</option>
                            <option value="FoM">FoM (L√óIdc)</option>
                            <option value="Gap">Gap (mm)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="yAxis" class="input-label">Y-Axis</label>
                        <select id="yAxis" class="input-field">
                            <option value="L_initial">Inductance (ŒºH)</option>
                            <option value="Idc_80">Idc 80% (A)</option>
                            <option value="Idc_70">Idc 70% (A)</option>
                            <option value="FoM">FoM (L√óIdc)</option>
                            <option value="Gap">Gap (mm)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="input-label">&nbsp;</label>
                        <button class="btn btn-secondary btn-full" id="btnExportCSV">Export Selected Data to CSV</button>
                    </div>
                    <div class="control-group">
                        <label class="input-label">&nbsp;</label>
                        <button class="btn btn-secondary btn-full" id="btnExportPNG">Export Chart to PNG</button>
                    </div>
                </div>
            </div>
            <div class="diagram-card animate-in">
                <h2 class="card-title">
                    <span class="card-icon">üìà</span>
                    Analysis Chart
                </h2>
                <div class="diagram-container">
                    <canvas id="mainChart"></canvas>
                    <div id="chartStatus" class="chart-status">Loading...</div>
                </div>
            </div>
            <div class="diagram-card animate-in">
                <h2 class="card-title">
                    <span class="card-icon">üìà</span>
                    Idc vs. Inductance Chart
                </h2>
                <div class="diagram-container">
                    <canvas id="idcInductanceChart"></canvas>
                    <div id="idcInductanceChartStatus" class="chart-status">Loading...</div>
                </div>
            </div>
            <div class="card animate-in">
                <h2 class="card-title">
                    <span class="card-icon">üìä</span>
                    Statistics Summary (Based on selected data)
                </h2>
                <div class="table-wrapper">
                    <table class="stats-table" id="statsTable">
                        <thead>
                            <tr>
                                <th>Group (Center Leg)</th>
                                <th>Count</th>
                                <th>L Avg (ŒºH)</th>
                                <th>Idc_70% Avg (A)</th>
                                <th>Idc_80% Avg (A)</th>
                                <th>FoM Avg</th>
                                <th>Gap Avg (mm)</th>
                            </tr>
                        </thead>
                        <tbody id="statsTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
